import{d as e}from"./main-BD-_UCWi.js";const n=6e4,s=(e,n,s)=>{const t={timestamp:Date.now(),type:n,description:s};e.activityLog.unshift(t),e.activityLog.length>20&&(e.activityLog=e.activityLog.slice(0,20))},t=e=>{const n=[],{componentsExplored:s,conceptsLearned:t,timeSpent:i}=e;return s.size>=5&&!e.achievements.has("component-explorer")&&(n.push({id:"component-explorer",title:"Component Explorer",description:"Explored 5 components",icon:"🔍"}),e.achievements.add("component-explorer")),s.size>=10&&!e.achievements.has("code-architect")&&(n.push({id:"code-architect",title:"Code Architect",description:"Explored 10 components",icon:"🏗️"}),e.achievements.add("code-architect")),i>=18e5&&!e.achievements.has("dedicated-learner")&&(n.push({id:"dedicated-learner",title:"Dedicated Learner",description:"Spent 30+ minutes learning",icon:"📚"}),e.achievements.add("dedicated-learner")),t.has("code-execution")&&t.has("source-css")&&!e.achievements.has("hands-on-learner")&&(n.push({id:"hands-on-learner",title:"Hands-on Learner",description:"Combined theory with practice",icon:"👐"}),e.achievements.add("hands-on-learner")),n},i={"html-structure":{name:"HTML & Structure",icon:"🏗️",checkpoints:[{id:"semantic-html",name:"Explored semantic HTML elements",trigger:"view-header"},{id:"component-structure",name:"Understood component structure",trigger:"view-navigation"},{id:"accessibility-basics",name:"Learned accessibility fundamentals",trigger:"view-accessible-forms"}]},"css-styling":{name:"CSS & Styling",icon:"🎨",checkpoints:[{id:"css-variables",name:"Mastered CSS custom properties",trigger:"view-theme-variables"},{id:"responsive-design",name:"Applied responsive design principles",trigger:"view-responsive-grid"},{id:"animations",name:"Created smooth animations",trigger:"view-animations"}]},"javascript-interactivity":{name:"JavaScript & Interactivity",icon:"⚡",checkpoints:[{id:"dom-manipulation",name:"Manipulated the DOM effectively",trigger:"view-interactive-components"},{id:"event-handling",name:"Implemented event handlers",trigger:"view-form-validation"},{id:"api-integration",name:"Integrated with external APIs",trigger:"view-data-fetching"}]},"performance-optimization":{name:"Performance & Optimization",icon:"🚀",checkpoints:[{id:"lazy-loading",name:"Implemented lazy loading strategies",trigger:"view-lazy-loading"},{id:"code-splitting",name:"Applied code splitting techniques",trigger:"view-dynamic-imports"},{id:"caching-strategies",name:"Optimized caching mechanisms",trigger:"view-service-worker"}]}},r=1e3,a=e=>{const n=Math.floor(e/r),s=Math.floor(n/60),t=Math.floor(s/60);return t>0?`${t}h ${s%60}m`:s>0?`${s}m`:`${n}s`},o=e=>{const n={componentsCount:e.componentsExplored.size,conceptsCount:e.conceptsLearned.size,timeSpent:a(e.timeSpent),achievements:e.achievements.size};return`\n    ${s=n.achievements,`\n  <div class="bsb-learning-progress__header">\n    <h3 class="bsb-learning-progress__title">\n      📚 Learning Progress\n      <span class="bsb-learning-progress__badge" data-count="${s}">\n        ${s}\n      </span>\n    </h3>\n    <div class="bsb-learning-progress__controls">\n      <button class="bsb-learning-progress__action" data-action="toggle-minimize"\n              aria-label="Toggle minimize" title="Minimize/Expand">\n        <span class="bsb-learning-progress__minimize-icon">−</span>\n      </button>\n      <button class="bsb-learning-progress__action" data-action="export-progress"\n              aria-label="Export progress" title="Export Progress">\n        📥\n      </button>\n      <button class="bsb-learning-progress__action bsb-learning-progress__action--danger"\n              data-action="reset-progress"\n              aria-label="Reset progress" title="Reset Progress">\n        🔄\n      </button>\n    </div>\n  </div>\n`}\n    <div class="bsb-learning-progress__content">\n      ${(e=>`\n  <div class="bsb-learning-progress__stats">\n    <div class="bsb-learning-progress__stat">\n      <div class="bsb-learning-progress__stat-value">${e.componentsCount}</div>\n      <div class="bsb-learning-progress__stat-label">Components</div>\n    </div>\n    <div class="bsb-learning-progress__stat">\n      <div class="bsb-learning-progress__stat-value">${e.conceptsCount}</div>\n      <div class="bsb-learning-progress__stat-label">Concepts</div>\n    </div>\n    <div class="bsb-learning-progress__stat">\n      <div class="bsb-learning-progress__stat-value">${e.timeSpent}</div>\n      <div class="bsb-learning-progress__stat-label">Time</div>\n    </div>\n    <div class="bsb-learning-progress__stat">\n      <div class="bsb-learning-progress__stat-value">${e.achievements}</div>\n      <div class="bsb-learning-progress__stat-label">Achievements</div>\n    </div>\n  </div>\n`)(n)}\n      ${(e=>{const n=((e,n)=>{const s=[],t=((e,n)=>({hasBasicHTML:e.has("header")||e.has("navigation"),hasCSS:e.has("theme-variables")||n.has("css-styling"),hasJS:e.has("interactive-components")||n.has("javascript")}))(e,n);return((e,n)=>{n.hasBasicHTML||e.push({path:"html-structure",reason:"Start with HTML fundamentals",priority:"high"})})(s,t),((e,n)=>{n.hasBasicHTML&&!n.hasCSS&&e.push({path:"css-styling",reason:"Build on HTML with styling",priority:"high"})})(s,t),((e,n)=>{n.hasBasicHTML&&n.hasCSS&&!n.hasJS&&e.push({path:"javascript-interactivity",reason:"Add interactivity to your knowledge",priority:"medium"})})(s,t),((e,n)=>{n.hasBasicHTML&&n.hasCSS&&n.hasJS&&e.push({path:"performance-optimization",reason:"Optimize for production",priority:"low"})})(s,t),s})(e.componentsExplored,e.conceptsLearned);if(0===n.length)return'\n      <div class="bsb-learning-progress__section">\n        <h4>🎯 Learning Paths</h4>\n        <div class="bsb-learning-progress__message">\n          <p>Great progress! You\'ve explored the fundamentals.\n             Continue exploring components to unlock new learning paths.</p>\n        </div>\n      </div>\n    ';const s=n.map((n=>((e,n)=>{const s=i[e.path],t=s.checkpoints.filter((e=>n.checkpoints.has(e.id))).length,r=s.checkpoints.length,a=Math.round(t/r*100);return`\n    <div class="bsb-learning-progress__path" data-priority="${e.priority}">\n      <div class="bsb-learning-progress__path-header">\n        <span class="bsb-learning-progress__path-icon">${s.icon}</span>\n        <div class="bsb-learning-progress__path-info">\n          <h5 class="bsb-learning-progress__path-name">${s.name}</h5>\n          <p class="bsb-learning-progress__path-reason">${e.reason}</p>\n        </div>\n        <div class="bsb-learning-progress__path-progress">\n          ${t}/${r}\n        </div>\n      </div>\n      <div class="bsb-learning-progress__progress-bar">\n        <div class="bsb-learning-progress__progress-fill"\n             style="width: ${a}%"></div>\n      </div>\n    </div>\n  `})(n,e))).join("");return`\n    <div class="bsb-learning-progress__section">\n      <h4>🎯 Recommended Learning Paths</h4>\n      <div class="bsb-learning-progress__paths">\n        ${s}\n      </div>\n    </div>\n  `})(e)}\n      ${(e=>0===e.activityLog.length?'\n      <div class="bsb-learning-progress__section">\n        <h4>📈 Recent Activity</h4>\n        <div class="bsb-learning-progress__message">\n          <p>Start exploring components to see your learning activity here!</p>\n        </div>\n      </div>\n    ':`\n    <div class="bsb-learning-progress__section">\n      <h4>📈 Recent Activity</h4>\n      <div class="bsb-learning-progress__timeline">\n        ${e.activityLog.slice(0,5).map((e=>`\n      <div class="bsb-learning-progress__activity">\n        <div class="bsb-learning-progress__activity-icon">\n          ${(e=>{const n={component:"🔍",concept:"💡",achievement:"🏆",milestone:"🎯",default:"📍"};return n[e]||n.default})(e.type)}\n        </div>\n        <div class="bsb-learning-progress__activity-content">\n          <div class="bsb-learning-progress__activity-description">\n            ${e.description}\n          </div>\n          <div class="bsb-learning-progress__activity-time">\n            ${(e=>{const n=Math.floor((Date.now()-e)/r);return n<60?"Just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:`${Math.floor(n/86400)}d ago`})(e.timestamp)}\n          </div>\n        </div>\n      </div>\n    `)).join("")}\n      </div>\n    </div>\n  `)(e)}\n    </div>\n  `;var s},c=e=>{const n=document.querySelector(".bsb-learning-progress__notification");n&&n.remove();const s=document.createElement("div");s.className="bsb-learning-progress__notification",s.innerHTML=`\n    <div class="bsb-learning-progress__notification-content">\n      <div class="bsb-learning-progress__notification-icon">${e.icon}</div>\n      <div class="bsb-learning-progress__notification-text">\n        <strong>${e.title}</strong>\n        <p>${e.description}</p>\n      </div>\n    </div>\n  `,document.body.appendChild(s),setTimeout((()=>{s.parentNode&&s.remove()}),3e3)},l="bsb-learning-progress",d=n=>{try{const s={componentsExplored:Array.from(n.componentsExplored),conceptsLearned:Array.from(n.conceptsLearned),achievements:Array.from(n.achievements),checkpoints:Array.from(n.checkpoints),timeSpent:n.timeSpent,lastActivity:n.lastActivity,activityLog:n.activityLog.slice(0,20),version:"1.0.0",savedAt:Date.now()};localStorage.setItem(l,JSON.stringify(s)),e.log("💾 Learning progress saved")}catch(s){e.warn("Failed to save learning progress:",s)}},p=()=>{try{const n=localStorage.getItem(l);if(n){const s=JSON.parse(n),t={componentsExplored:new Set(s.componentsExplored||[]),conceptsLearned:new Set(s.conceptsLearned||[]),achievements:new Set(s.achievements||[]),checkpoints:new Map(s.checkpoints||[]),timeSpent:s.timeSpent||0,lastActivity:s.lastActivity||Date.now(),activityLog:s.activityLog||[]};return e.log("📂 Learning progress loaded"),t}}catch(n){e.warn("Failed to load learning progress:",n)}return{componentsExplored:/* @__PURE__ */new Set,conceptsLearned:/* @__PURE__ */new Set,timeSpent:0,lastActivity:Date.now(),achievements:/* @__PURE__ */new Set,checkpoints:/* @__PURE__ */new Map,activityLog:[]}};class g{constructor(){this.element=null,this.isMinimized=!1,this.startTime=Date.now(),this.trackingInterval=null,this.componentObserver=null,this.progress=p(),this.init()}init(){this.createElements(),this.setupEventListeners(),this.startTracking(),this.updateDisplay(),0===this.progress.componentsExplored.size&&s(this.progress,"started","Started BSB learning journey!"),e.log("🎓 Learning Progress Tracker initialized")}createElements(){if(this.element=document.querySelector(".bsb-learning-progress"),this.element)return;const e=this.getTemplate(),n=document.createElement("div");n.innerHTML=e,this.element=n.firstElementChild,document.body.appendChild(this.element)}getTemplate(){return o(this.progress)}setupEventListeners(){var n;this.element.querySelector(".bsb-learning-progress__header").addEventListener("click",(()=>this.toggleMinimize())),this.componentObserver=((n,s)=>{const t=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const i=t.target,r=i.dataset.component||i.className.split(" ")[0];r&&!n.componentsExplored.has(r)&&(e.log(`📍 Discovered component: ${r}`),s(r))}}))}),{threshold:.5,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll("[data-component], .component, .bsb-component").forEach((e=>t.observe(e))),t})(this.progress,(e=>{this.addComponentExplored(e)})),n=e=>{this.addConceptLearned(e)},document.addEventListener("source-viewed",(s=>{const{file:t,language:i}=s.detail;e.log(`👁️ Source viewed: ${t} (${i})`),n(`source-${i}`),n("code-exploration")})),(n=>{document.addEventListener("code-executed",(s=>{const{language:t}=s.detail||{};e.log(`⚡ Code executed: ${t||"unknown"}`),n("code-execution"),t&&n(`playground-${t}`)}))})((e=>{this.addConceptLearned(e)})),this.element.addEventListener("click",(e=>{const{action:n}=e.target.dataset;n&&this.handleAction(n)}))}startTracking(){var e,s;this.trackingInterval=(e=this.progress,s=()=>{this.saveProgress()},setInterval((()=>{const t=Date.now(),i=t-e.lastActivity;document.hidden||i<12e4&&(e.timeSpent+=n,e.lastActivity=t,s())}),n))}updateDisplay(){((e,n)=>{if(!e)return;e.innerHTML=o(n);const s=e.querySelector(".bsb-learning-progress__badge");s&&n.achievements.size>0&&setTimeout((()=>{s.classList.add("bsb-learning-progress__badge--animated")}),20)})(this.element,this.progress)}addComponentExplored(e){this.progress.componentsExplored.add(e),s(this.progress,"component",`Explored ${e} component`),t(this.progress).forEach((e=>{c(e)})),this.updateDisplay(),d(this.progress)}addConceptLearned(e){this.progress.conceptsLearned.add(e),s(this.progress,"concept",`Learned ${e}`),t(this.progress).forEach((e=>{c(e)})),this.updateDisplay(),d(this.progress)}toggleMinimize(){this.isMinimized=!this.isMinimized,this.element.classList.toggle("bsb-learning-progress--minimized",this.isMinimized)}handleAction(n){switch(n){case"export-progress":(n=>{const s={learningProgress:{componentsExplored:Array.from(n.componentsExplored),conceptsLearned:Array.from(n.conceptsLearned),achievements:Array.from(n.achievements),timeSpent:n.timeSpent,activityLog:n.activityLog},exportDate:/* @__PURE__ */(new Date).toISOString(),version:"1.0.0"},t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=`bsb-learning-progress-${/* @__PURE__ */(new Date).toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(i),e.log("📤 Learning progress exported")})(this.progress);break;case"reset-progress":this.showResetConfirmation();break;case"toggle-minimize":this.toggleMinimize()}}showResetConfirmation(){const n=document.createElement("div");n.className="bsb-confirm-dialog-overlay",n.innerHTML='\n      <div class="bsb-confirm-dialog">\n        <h3>Reset Learning Progress?</h3>\n        <p>Are you sure you want to reset all learning progress? This cannot be undone.</p>\n        <div class="bsb-confirm-dialog__actions">\n          <button class="bsb-confirm-dialog__cancel">Cancel</button>\n          <button class="bsb-confirm-dialog__confirm">Reset Progress</button>\n        </div>\n      </div>\n    ',document.body.appendChild(n),n.querySelector(".bsb-confirm-dialog__cancel").addEventListener("click",(()=>{document.body.removeChild(n)})),n.querySelector(".bsb-confirm-dialog__confirm").addEventListener("click",(()=>{(()=>{try{localStorage.removeItem(l),e.log("🔄 Learning progress reset")}catch(n){e.warn("Failed to reset learning progress:",n)}})(),this.progress=p(),this.updateDisplay(),document.body.removeChild(n)}))}cleanup(){this.trackingInterval&&clearInterval(this.trackingInterval),this.componentObserver&&this.componentObserver.disconnect()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{"true"===localStorage.getItem("bsb-learning-mode")&&(window.BSBLearningProgress=new g)})):"true"===localStorage.getItem("bsb-learning-mode")&&(window.BSBLearningProgress=new g);export{g as default};
