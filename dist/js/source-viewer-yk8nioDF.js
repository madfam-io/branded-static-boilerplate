import{d as e}from"./main-BD-_UCWi.js";const n=e=>{var n;return e.dataset.bsbComponent||(null==(n=e.className.split(" ").find((e=>e.startsWith("bsb-"))))?void 0:n.replace("bsb-",""))||"unknown-component"},t=e=>{const n=e.cloneNode(!0);return n.querySelectorAll(".bsb-view-source-btn").forEach((e=>e.remove())),(e=>{const n=e.split(/>\s*</u);let t="",s=0;return n.forEach(((e,o)=>{let r=e.trim();o>0&&!r.startsWith("<")&&(r=`<${r}`),o<n.length-1&&!r.endsWith(">")&&(r+=">"),r.startsWith("</")&&(s=Math.max(0,s-1)),t+=`${"  ".repeat(s)+r}\n`,!r.startsWith("<")||r.startsWith("</")||r.endsWith("/>")||r.includes("</")||(s+=1)})),t.trim()})(n.outerHTML)},s=t=>{const s=n(t),o=[];try{Array.from(document.styleSheets).forEach((n=>{try{Array.from(n.cssRules||[]).forEach((e=>{e.selectorText&&e.selectorText.includes(`bsb-${s}`)&&o.push(`${e.selectorText} {\n  ${e.style.cssText}\n}`)}))}catch(t){e.warn("Cannot access stylesheet rules:",t)}}))}catch(r){e.warn("Error extracting CSS:",r)}return o.length>0?o.join("\n\n"):"/* No CSS rules found for this component */"},o=e=>{const n=Array.from(document.querySelectorAll("script"));let t="";return n.forEach((n=>{n.src?n.src.includes(e)&&(t+=`// External script: ${n.src}\n`):n.textContent&&(n.textContent.includes(e)||n.textContent.includes(`bsb-${e}`))&&(t+=`${n.textContent}\n`)})),t.trim()||(t=(e=>{const n=e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("");return`// ${n} Component JavaScript Template\nclass BSB${n} {\n  constructor(element) {\n    this.element = element;\n    this.init();\n  }\n\n  init() {\n    this.setupEventListeners();\n    console.log('${n} component initialized');\n  }\n\n  setupEventListeners() {\n    // Add your event listeners here\n    this.element.addEventListener('click', (event) => {\n      this.handleClick(event);\n    });\n  }\n\n  handleClick(event) {\n    // Handle click events\n    console.log('${n} clicked:', event.target);\n  }\n}\n\n// Initialize all ${e} components\ndocument.addEventListener('DOMContentLoaded', () => {\n  const components = document.querySelectorAll('[data-bsb-component="${e}"]');\n  components.forEach(element => {\n    new BSB${n}(element);\n  });\n});`})(e)),t},r=e=>{const r=n(e);return{html:t(e),css:s(e),js:o(r),componentName:r}},c=(e,n="info")=>{const t=document.createElement("div");t.className=`bsb-source-viewer__notification bsb-source-viewer__notification--${n}`,t.textContent=e,t.style.cssText=`\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: var(--bsb-${"success"===n?"success":"primary"});\n    color: white;\n    padding: 12px 16px;\n    border-radius: 4px;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    z-index: 10001;\n    font-size: 14px;\n    animation: slideInRight 0.3s ease;\n  `,document.body.appendChild(t),setTimeout((()=>{t.style.animation="slideOutRight 0.3s ease",setTimeout((()=>t.remove()),300)}),3e3)},i=(e,n,t)=>{const s=new Blob([n],{type:t}),o=URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=e,r.click(),URL.revokeObjectURL(o)},a=(e,n,t=!1)=>`\n  <div class="bsb-source-viewer__panel${t?" bsb-source-viewer__panel--active":""}" data-panel="${e}">\n    <div class="bsb-source-viewer__code-header">\n      <span class="bsb-source-viewer__code-label">${n}</span>\n      <button class="bsb-source-viewer__copy" data-copy="${e}">Copy ${e.toUpperCase()}</button>\n    </div>\n    <pre class="bsb-source-viewer__code"><code class="language-${e}" id="${e}-code"></code></pre>\n  </div>\n`,l=async(e,n)=>{try{await navigator.clipboard.writeText(e),c(`${n.toUpperCase()} code copied to clipboard!`,"success")}catch(t){const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),c(`${n.toUpperCase()} code copied to clipboard!`,"success")}};class d{constructor(){this.viewer=null,this.currentComponent=null,this.isActive=!1,this.currentTab="html",this.init()}init(){(()=>{const e="bsb-source-viewer-styles";if(document.getElementById(e))return;const n=document.createElement("style");n.id=e,n.textContent=["\n    /* Source Viewer Button */\n    .bsb-view-source-btn {\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      background: rgba(0, 0, 0, 0.7);\n      color: white;\n      border: none;\n      border-radius: 4px;\n      width: 32px;\n      height: 32px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 14px;\n      z-index: 10;\n      opacity: 0;\n      transition: all 0.2s ease;\n      backdrop-filter: blur(4px);\n    }\n\n    .bsb-view-source-btn:hover {\n      background: rgba(0, 0, 0, 0.9);\n      transform: scale(1.1);\n    }\n\n    [data-bsb-component]:hover .bsb-view-source-btn {\n      opacity: 1;\n    }\n","\n    /* Source Viewer Modal */\n    .bsb-source-viewer {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.9);\n      z-index: 9999;\n      display: flex;\n      flex-direction: column;\n      backdrop-filter: blur(8px);\n    }\n\n    .bsb-source-viewer__header {\n      background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);\n      padding: 16px 24px;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      border-bottom: 1px solid #404040;\n    }\n\n    .bsb-source-viewer__title {\n      color: #ffffff;\n      font-size: 18px;\n      font-weight: 600;\n      margin: 0;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n\n    .bsb-source-viewer__close {\n      background: transparent;\n      border: 1px solid #606060;\n      color: #ffffff;\n      width: 36px;\n      height: 36px;\n      border-radius: 6px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: all 0.2s ease;\n    }\n\n    .bsb-source-viewer__close:hover {\n      background: #f44336;\n      border-color: #f44336;\n    }\n","\n    .bsb-source-viewer__content {\n      flex: 1;\n      display: flex;\n      overflow: hidden;\n    }\n\n    .bsb-source-viewer__tabs {\n      background: #2d2d2d;\n      border-right: 1px solid #404040;\n      width: 250px;\n      overflow-y: auto;\n    }\n\n    .bsb-source-viewer__tab {\n      display: block;\n      width: 100%;\n      padding: 12px 20px;\n      background: transparent;\n      border: none;\n      color: #cccccc;\n      text-align: left;\n      cursor: pointer;\n      border-bottom: 1px solid #404040;\n      transition: all 0.2s ease;\n      font-size: 14px;\n    }\n\n    .bsb-source-viewer__tab:hover {\n      background: #404040;\n      color: #ffffff;\n    }\n\n    .bsb-source-viewer__tab.active {\n      background: #0066cc;\n      color: #ffffff;\n    }\n\n    .bsb-source-viewer__code-container {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n","\n    .bsb-source-viewer__code-header {\n      background: #1e1e1e;\n      padding: 12px 20px;\n      border-bottom: 1px solid #404040;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .bsb-source-viewer__filename {\n      color: #ffffff;\n      font-size: 14px;\n      font-family: 'Courier New', monospace;\n    }\n\n    .bsb-source-viewer__copy-btn {\n      background: #0066cc;\n      border: none;\n      color: white;\n      padding: 6px 12px;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 12px;\n      transition: background 0.2s ease;\n    }\n\n    .bsb-source-viewer__copy-btn:hover {\n      background: #0052a3;\n    }\n\n    .bsb-source-viewer__code {\n      flex: 1;\n      background: #1e1e1e;\n      color: #ffffff;\n      font-family: 'Courier New', Monaco, monospace;\n      font-size: 14px;\n      line-height: 1.5;\n      padding: 20px;\n      overflow: auto;\n      white-space: pre;\n      tab-size: 2;\n    }\n","\n    /* Syntax Highlighting */\n    .bsb-source-viewer .hljs {\n      background: transparent !important;\n      color: #ffffff;\n    }\n\n    .bsb-source-viewer .hljs-comment {\n      color: #6a9955;\n    }\n\n    .bsb-source-viewer .hljs-keyword {\n      color: #569cd6;\n    }\n\n    .bsb-source-viewer .hljs-string {\n      color: #ce9178;\n    }\n\n    .bsb-source-viewer .hljs-number {\n      color: #b5cea8;\n    }\n\n    .bsb-source-viewer .hljs-function {\n      color: #dcdcaa;\n    }\n\n    .bsb-source-viewer .hljs-variable {\n      color: #9cdcfe;\n    }\n\n    .bsb-source-viewer .hljs-tag {\n      color: #569cd6;\n    }\n\n    .bsb-source-viewer .hljs-attr {\n      color: #92c5f7;\n    }\n\n    .bsb-source-viewer .hljs-title {\n      color: #4ec9b0;\n    }\n","\n    /* Responsive Design */\n    @media (max-width: 768px) {\n      .bsb-source-viewer__content {\n        flex-direction: column;\n      }\n\n      .bsb-source-viewer__tabs {\n        width: 100%;\n        max-height: 150px;\n        border-right: none;\n        border-bottom: 1px solid #404040;\n        display: flex;\n        overflow-x: auto;\n        overflow-y: hidden;\n      }\n\n      .bsb-source-viewer__tab {\n        white-space: nowrap;\n        border-bottom: none;\n        border-right: 1px solid #404040;\n        min-width: 120px;\n      }\n\n      .bsb-source-viewer__header {\n        padding: 12px 16px;\n      }\n\n      .bsb-source-viewer__title {\n        font-size: 16px;\n      }\n\n      .bsb-source-viewer__code {\n        font-size: 12px;\n        padding: 15px;\n      }\n    }\n\n    @media (max-width: 480px) {\n      .bsb-view-source-btn {\n        width: 28px;\n        height: 28px;\n        font-size: 12px;\n      }\n\n      .bsb-source-viewer__code {\n        font-size: 11px;\n        padding: 10px;\n      }\n    }\n"].join("\n"),document.head.appendChild(n)})(),this.createViewer(),this.setupEventListeners(),this.addViewSourceButtons(),e.log("ðŸ“š BSB Source Viewer initialized")}createViewer(){const e=`\n  <div class="bsb-source-viewer" id="source-viewer">\n    <div class="bsb-source-viewer__backdrop"></div>\n    <div class="bsb-source-viewer__container">\n      \n  <div class="bsb-source-viewer__header">\n    <h2 class="bsb-source-viewer__title">\n      <span class="bsb-source-viewer__icon">ðŸ“„</span>\n      Component Source Code\n    </h2>\n    <div class="bsb-source-viewer__actions">\n      <button class="bsb-source-viewer__action" data-action="copy-all" title="Copy All">\n        ðŸ“‹\n      </button>\n      <button class="bsb-source-viewer__action" data-action="playground" title="Open in Playground">\n        âš¡\n      </button>\n      <button class="bsb-source-viewer__action" data-action="download" title="Download">\n        ðŸ’¾\n      </button>\n      <button class="bsb-source-viewer__action bsb-source-viewer__close" data-action="close" title="Close">\n        âœ•\n      </button>\n    </div>\n  </div>\n\n      \n  <div class="bsb-source-viewer__tabs">\n    <button class="bsb-source-viewer__tab bsb-source-viewer__tab--active" data-tab="html">\n      HTML\n    </button>\n    <button class="bsb-source-viewer__tab" data-tab="css">\n      CSS\n    </button>\n    <button class="bsb-source-viewer__tab" data-tab="js">\n      JavaScript\n    </button>\n  </div>\n\n      <div class="bsb-source-viewer__content">\n        ${a("html","HTML Structure",!0)}\n        ${a("css","CSS Styles")}\n        ${a("js","JavaScript Logic")}\n      </div>\n      \n  <div class="bsb-source-viewer__footer">\n    <div class="bsb-source-viewer__component-info">\n      <span class="bsb-source-viewer__component-name"></span>\n    </div>\n    <div class="bsb-source-viewer__stats">\n      <span class="bsb-source-viewer__stat">\n        <span class="bsb-source-viewer__stat-label">HTML:</span>\n        <span class="bsb-source-viewer__stat-value" data-stat="html-lines">0</span> lines\n      </span>\n      <span class="bsb-source-viewer__stat">\n        <span class="bsb-source-viewer__stat-label">CSS:</span>\n        <span class="bsb-source-viewer__stat-value" data-stat="css-lines">0</span> lines\n      </span>\n      <span class="bsb-source-viewer__stat">\n        <span class="bsb-source-viewer__stat-label">JS:</span>\n        <span class="bsb-source-viewer__stat-value" data-stat="js-lines">0</span> lines\n      </span>\n    </div>\n  </div>\n\n    </div>\n  </div>\n`,n=document.createElement("div");n.innerHTML=e,this.viewer=n.firstElementChild,document.body.appendChild(this.viewer)}setupEventListeners(){this.viewer.addEventListener("click",(e=>{const{action:n}=e.target.dataset;n&&this.handleAction(n,e)})),this.viewer.addEventListener("click",(e=>{if(e.target.matches(".bsb-source-viewer__tab")){const n=e.target.dataset.tab;this.switchTab(n)}})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.isActive&&this.close()})),this.viewer.addEventListener("click",(e=>{e.target.matches(".bsb-source-viewer__backdrop")&&this.close()}))}addViewSourceButtons(){"true"===localStorage.getItem("bsb-learning-mode")&&document.querySelectorAll("[data-bsb-component]").forEach((e=>{const n=(e=>{if(e.querySelector(".bsb-view-source-btn"))return null;const n=document.createElement("button");n.className="bsb-view-source-btn",n.setAttribute("aria-label","View source code"),n.innerHTML="ðŸ“„",n.title="View Source Code";const{position:t}=window.getComputedStyle(e);return"static"===t&&(e.style.position="relative"),e.appendChild(n),n})(e);n&&n.addEventListener("click",(n=>{n.stopPropagation(),this.showComponentSource(e)}))}))}showComponentSource(e){this.currentComponent=e;(e=>{const{html:n,css:t,js:s,componentName:o}=e,r=document.getElementById("html-code"),c=document.getElementById("css-code"),i=document.getElementById("js-code");r&&(r.textContent=n),c&&(c.textContent=t),i&&(i.textContent=s);const a=document.querySelector(".bsb-source-viewer__component-name");var l;a&&(a.textContent=`Component: ${o}`),l={"html-lines":n.split("\n").length,"css-lines":t.split("\n").length,"js-lines":s.split("\n").length},Object.entries(l).forEach((([e,n])=>{const t=document.querySelector(`[data-stat="${e}"]`);t&&(t.textContent=n)})),window.Prism&&window.Prism.highlightAll()})(r(e)),this.show()}switchTab(e){this.currentTab=e,(e=>{document.querySelectorAll(".bsb-source-viewer__tab").forEach((n=>{const t=n.dataset.tab===e;n.classList.toggle("bsb-source-viewer__tab--active",t)})),document.querySelectorAll(".bsb-source-viewer__panel").forEach((n=>{const t=n.dataset.panel===e;n.classList.toggle("bsb-source-viewer__panel--active",t)}))})(e)}handleAction(e,n){switch(e){case"close":this.close();break;case"copy-all":this.copyAll();break;case"copy":this.copyCurrentTab();break;case"download":this.download();break;case"playground":this.openInPlayground();break;default:if(e.startsWith("copy-")){const n=e.replace("copy-","");this.copyCode(n)}}}copyCode(e){if(!this.currentComponent)return;const n=r(this.currentComponent)[e];n&&l(n,e)}copyAll(){if(!this.currentComponent)return;const e=r(this.currentComponent),n=`\x3c!-- HTML --\x3e\n${e.html}\n\n/* CSS */\n${e.css}\n\n// JavaScript\n${e.js}`;l(n,"all")}copyCurrentTab(){this.copyCode(this.currentTab)}download(){this.currentComponent&&(e=>{const{html:n,css:t,js:s,componentName:o}=e;i(`${o}.html`,n,"text/html"),i(`${o}.css`,t,"text/css"),i(`${o}.js`,s,"text/javascript"),c("Source files downloaded!","success")})(r(this.currentComponent))}openInPlayground(){if(!this.currentComponent)return;const e=r(this.currentComponent);document.dispatchEvent(new CustomEvent("open-playground",{detail:e})),this.close()}show(){this.isActive=!0,(e=>{e.classList.add("bsb-source-viewer--active"),document.body.style.overflow="hidden";const n=e.querySelector('[data-action="close"]');n&&setTimeout((()=>n.focus()),100)})(this.viewer)}close(){this.isActive=!1,this.viewer.classList.remove("bsb-source-viewer--active"),document.body.style.overflow="",this.currentComponent=null}isOpen(){return this.isActive}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{window.bsbSourceViewer=new d})):window.bsbSourceViewer=new d;export{d as default};
