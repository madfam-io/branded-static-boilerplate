import"./main-JINdu1zH.js";/* empty css             */class e{constructor(e){this.element=e,this.button=e.querySelector("[data-bsb-theme-button]"),this.menu=e.querySelector("[data-bsb-theme-menu]"),this.options=e.querySelectorAll("[data-theme]"),this.label=e.querySelector("[data-bsb-theme-label]"),this.currentTheme=this.getStoredTheme()||"auto",this.isMenuOpen=!1,this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.init()}init(){this.applyTheme(this.currentTheme,!1),this.setupEventListeners(),this.updateUI()}setupEventListeners(){this.button.addEventListener("click",(()=>{this.toggleMenu()})),this.options.forEach((e=>{e.addEventListener("click",(()=>{const{theme:t}=e.dataset;this.setTheme(t),this.closeMenu()}))})),this.element.addEventListener("keydown",(e=>{this.handleKeydown(e)})),document.addEventListener("click",(e=>{this.element.contains(e.target)||this.closeMenu()})),this.mediaQuery.addEventListener("change",(()=>{"auto"===this.currentTheme&&this.updateSystemTheme()})),window.addEventListener("focus",(()=>{"auto"===this.currentTheme&&this.updateSystemTheme()}))}handleKeydown(e){const{key:t}=e;if("Escape"===t&&this.isMenuOpen)return e.preventDefault(),this.closeMenu(),void this.button.focus();if(("Enter"===t||" "===t)&&e.target===this.button)return e.preventDefault(),void this.toggleMenu();if(this.isMenuOpen&&["ArrowDown","ArrowUp"].includes(t))return e.preventDefault(),void this.navigateMenu("ArrowDown"===t?1:-1);if(this.isMenuOpen&&("Enter"===t||" "===t)&&e.target.dataset.theme){e.preventDefault();const{theme:t}=e.target.dataset;this.setTheme(t),this.closeMenu(),this.button.focus()}}navigateMenu(e){const t=Array.from(this.options);let s=t.indexOf(document.activeElement)+e;s>=t.length?s=0:s<0&&(s=t.length-1),t[s].focus()}toggleMenu(){this.isMenuOpen?this.closeMenu():this.openMenu()}openMenu(){this.isMenuOpen=!0,this.button.setAttribute("aria-expanded","true"),this.menu.setAttribute("aria-hidden","false"),setTimeout((()=>{const[e]=this.options;e&&e.focus()}),100)}closeMenu(){this.isMenuOpen=!1,this.button.setAttribute("aria-expanded","false"),this.menu.setAttribute("aria-hidden","true")}setTheme(e){["light","dark","auto"].includes(e)&&(this.currentTheme=e,this.applyTheme(e),this.storeTheme(e),this.updateUI(),this.dispatchThemeChange(e))}applyTheme(e,t=!0){const{body:s}=document;t||s.classList.add("no-transition"),"auto"===e?s.removeAttribute("data-bsb-theme"):s.setAttribute("data-bsb-theme",e),t||setTimeout((()=>{s.classList.remove("no-transition")}),50)}updateSystemTheme(){"auto"===this.currentTheme&&this.applyTheme("auto")}updateUI(){this.updateIcons(),this.updateMenuOptions(),this.updateLabel()}updateIcons(){this.element.querySelectorAll(".bsb-theme-toggle__icon").forEach((e=>{e.classList.remove("bsb-theme-toggle__icon--active")}));const e=this.element.querySelector(`.bsb-theme-toggle__icon--${this.currentTheme}`);e&&e.classList.add("bsb-theme-toggle__icon--active")}updateMenuOptions(){this.options.forEach((e=>{const t=e.dataset.theme===this.currentTheme;e.setAttribute("aria-current",t.toString())}))}updateLabel(){if(this.label){const e={light:"Light",dark:"Dark",auto:"Auto"};this.label.textContent=e[this.currentTheme]||"Auto"}}getStoredTheme(){try{return localStorage.getItem("bsb-theme")}catch(e){return null}}storeTheme(e){try{localStorage.setItem("bsb-theme",e)}catch(t){}}dispatchThemeChange(e){const t=new CustomEvent("bsb:themechange",{detail:{theme:e,element:this.element},bubbles:!0});this.element.dispatchEvent(t)}}function t(){document.querySelectorAll('[data-bsb-component="theme-toggle"]').forEach((t=>{new e(t)}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.BSBThemeToggle=e;
