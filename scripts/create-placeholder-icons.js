/**
 * Create Placeholder Icon Files
 * =============================
 *
 * Creates minimal valid PNG files as placeholders for the missing icons.
 * These are 1x1 pixel PNGs that will prevent 404 errors.
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Minimal valid 1x1 PNG (blue pixel)
const minimalPNG = Buffer.from([
  0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, // PNG signature
  0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52, // IHDR chunk
  0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, // 1x1 dimensions
  0x08, 0x02, 0x00, 0x00, 0x00, 0x90, 0x77, 0x53, // 8-bit RGB
  0xDE, 0x00, 0x00, 0x00, 0x0C, 0x49, 0x44, 0x41, // IDAT chunk
  0x54, 0x08, 0xD7, 0x63, 0x60, 0x60, 0xF8, 0x0F, // Blue pixel data
  0x00, 0x00, 0x01, 0x01, 0x01, 0x27, 0x18, 0x22,
  0x90, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4E, // IEND chunk
  0x44, 0xAE, 0x42, 0x60, 0x82
]);

// Minimal valid ICO file (1x1 blue icon)
const minimalICO = Buffer.from([
  0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x01, // ICO header
  0x00, 0x00, 0x01, 0x00, 0x18, 0x00, 0x30, 0x00, // Image directory
  0x00, 0x00, 0x16, 0x00, 0x00, 0x00, 0x28, 0x00, // BMP header
  0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x02, 0x00,
  0x00, 0x00, 0x01, 0x00, 0x18, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xCC, 0x66, // Blue pixel
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00 // Mask
]);

const imagesDir = path.join(__dirname, '..', 'src', 'assets', 'images');

// Ensure directory exists
if (!fs.existsSync(imagesDir)) {
  fs.mkdirSync(imagesDir, { recursive: true });
}

// Create PNG files
const pngFiles = [
  'favicon.png',
  'icon-192.png',
  'icon-512.png',
  'playground-icon.png',
  'components-icon.png'
];

console.log('ðŸŽ¨ Creating placeholder icon files...\n');

pngFiles.forEach(filename => {
  const filepath = path.join(imagesDir, filename);
  fs.writeFileSync(filepath, minimalPNG);
  console.log(`âœ“ Created ${filename}`);
});

// Create ICO file
const icoPath = path.join(imagesDir, 'favicon.ico');
fs.writeFileSync(icoPath, minimalICO);
console.log('âœ“ Created favicon.ico');

console.log('\nâœ… All placeholder icons created successfully!');
console.log('ðŸ“Œ Note: Replace these 1x1 placeholders with proper icons for production.');